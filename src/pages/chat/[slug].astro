---
import { actions } from "astro:actions";
import type { ChatService } from "../../../../api/src";
import AppLayout from "../AppLayout.astro";
import {Chat} from "./components/Messages"
export const prerender = false;

const {slug} = Astro.params;
if (!slug) throw new Error('no path');

const chat = Astro.locals.runtime.env.Chat as unknown as ChatService;
const user_email = Astro.locals.user.email;

// const members = await chat.members(user_email, slug);

// if (!members.length) throw new Error('not found');

console.log("chat:",slug)
---
<AppLayout>

	<Chat
		id={slug}
		email={user_email}
		client:load
	/>


</AppLayout>
